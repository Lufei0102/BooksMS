(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2efe7390"],{"019c":function(e,t,n){},"159b":function(e,t,n){var r=n("da84"),o=n("fdbc"),i=n("17c2"),a=n("9112");for(var s in o){var l=r[s],c=l&&l.prototype;if(c&&c.forEach!==i)try{a(c,"forEach",i)}catch(u){c.forEach=i}}},"17c2":function(e,t,n){"use strict";var r=n("b727").forEach,o=n("a640"),i=n("ae40"),a=o("forEach"),s=i("forEach");e.exports=a&&s?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},"1dde":function(e,t,n){var r=n("d039"),o=n("b622"),i=n("2d00"),a=o("species");e.exports=function(e){return i>=51||!r((function(){var t=[],n=t.constructor={};return n[a]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},4160:function(e,t,n){"use strict";var r=n("23e7"),o=n("17c2");r({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},6514:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"book"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.bookList.filter((function(t){return!e.search||t.bk_name.toLowerCase().includes(e.search.toLowerCase())}))}},[n("el-table-column",{attrs:{label:"图书编号",prop:"bk_number"}}),n("el-table-column",{attrs:{label:"图书名",prop:"bk_name"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.editing?[n("el-input",{staticClass:"edit-input",model:{value:t.row.bk_name,callback:function(n){e.$set(t.row,"bk_name",n)},expression:"scope.row.bk_name"}})]:n("span",[e._v(e._s(t.row.bk_name))])]}}])}),n("el-table-column",{attrs:{label:"作者",prop:"bk_writer"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.editing?[n("el-input",{staticClass:"edit-input",model:{value:t.row.bk_writer,callback:function(n){e.$set(t.row,"bk_writer",n)},expression:"scope.row.bk_writer"}})]:n("span",[e._v(e._s(t.row.bk_writer))])]}}])}),n("el-table-column",{attrs:{label:"出版社",prop:"bk_publish"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.editing?[n("el-input",{staticClass:"edit-input",model:{value:t.row.bk_publish,callback:function(n){e.$set(t.row,"bk_publish",n)},expression:"scope.row.bk_publish"}})]:n("span",[e._v(e._s(t.row.bk_publish))])]}}])}),n("el-table-column",{attrs:{label:"图书总数",prop:"bk_amount"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.editing?[n("el-input",{staticClass:"edit-input",model:{value:t.row.bk_amount,callback:function(n){e.$set(t.row,"bk_amount",n)},expression:"scope.row.bk_amount"}})]:n("span",[e._v(e._s(t.row.bk_amount))])]}}])}),n("el-table-column",{attrs:{label:"评分",prop:"bk_grade"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.editing?[n("el-input",{staticClass:"edit-input",model:{value:t.row.bk_grade,callback:function(n){e.$set(t.row,"bk_grade",n)},expression:"scope.row.bk_grade"}})]:n("span",[e._v(e._s(t.row.bk_grade))])]}}])}),n("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"header",fn:function(t){return[n("el-input",{attrs:{size:"mini",placeholder:"输入书名关键字搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(t){return[t.row.editing?e._e():n("el-button",{attrs:{type:"danger",size:"mini"},nativeOn:{click:function(n){return e.handleEdit(t.$index,t.row)}},model:{value:t.$index,callback:function(n){e.$set(t,"$index",n)},expression:"scope.$index"}},[e._v("编辑")]),t.row.editing?n("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(n){return e.savedata(t.$index,t.row)}},model:{value:t.$index,callback:function(n){e.$set(t,"$index",n)},expression:"scope.$index"}},[e._v("保存")]):e._e(),t.row.editing?n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){return e.handleCancel(t.$index,t.row)}}},[e._v("取消")]):e._e(),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)},o=[];n("4160"),n("a434"),n("159b");function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a={data:function(){return{bookList:[],prevValue:{},search:""}},created:function(){this.showAllbookList()},methods:{handleEdit:function(e,t){t.editing=!0,this.prevValue=JSON.parse(JSON.stringify(t))},handleCancel:function(e,t){t.editing=!1;var n=[];n[0]=this.prevValue.bk_name,n[1]=this.prevValue.bk_writer,n[2]=this.prevValue.bk_publish,n[3]=this.prevValue.bk_amount,n[4]=this.prevValue.bk_grade,this.$set(t,"bk_name",n[0]),this.$set(t,"bk_writer",n[1]),this.$set(t,"bk_publish",n[2]),this.$set(t,"bk_amount",n[3]),this.$set(t,"bk_grade",n[4])},savedata:function(e,t){var n=JSON.parse(JSON.stringify(this.bookList[e]));console.log(n),this.$axios.post("/api/updBooks",{bk_number:n.bk_number,bk_name:n.bk_name,bk_writer:n.bk_writer,bk_publish:n.bk_publish,bk_amount:n.bk_amount,bk_grade:n.bk_grade}).then((function(e){var r=e.data[2];1==r?(alert("修改id为【"+n.bk_number+"】的图书成功！"),t.editing=!1):alert("修改失败！")})).catch((function(e){console.log(e)}))},handleDelete:function(e,t){var n=this;console.log(e,t),confirm("确定删除《"+t.bk_name+"》吗？")&&this.$axios.post("/api/delBooks",{bk_number:t.bk_number}).then((function(t){var r=t.data[2];console.log(r),1==r?(n.bookList.splice(e,1),alert("删除成功！")):alert("删除失败！请稍后重试。")})).catch((function(e){console.log(e),alert("请求操作失败！")}))},showAllbookList:function(){var e=this;this.$axios.get("/api/showAllBooks").then((function(t){var n=t.data;console.log(n);var r=[];n.forEach((function(e){r.push(i({bk_number:e.bk_number,bk_name:e.bk_name,bk_publish:e.bk_publish,bk_amount:e.bk_amount,bk_writer:e.bk_writer,bk_grade:e.bk_grade},"bk_amount",e.bk_amount))})),e.bookList=r,console.log(r)})).catch((function(e){console.log(e)}))}}},s=a,l=(n("af9e"),n("2877")),c=Object(l["a"])(s,r,o,!1,null,null,null);t["default"]=c.exports},"65f0":function(e,t,n){var r=n("861d"),o=n("e8b5"),i=n("b622"),a=i("species");e.exports=function(e,t){var n;return o(e)&&(n=e.constructor,"function"!=typeof n||n!==Array&&!o(n.prototype)?r(n)&&(n=n[a],null===n&&(n=void 0)):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},8418:function(e,t,n){"use strict";var r=n("c04e"),o=n("9bf2"),i=n("5c6c");e.exports=function(e,t,n){var a=r(t);a in e?o.f(e,a,i(0,n)):e[a]=n}},a434:function(e,t,n){"use strict";var r=n("23e7"),o=n("23cb"),i=n("a691"),a=n("50c4"),s=n("7b0b"),l=n("65f0"),c=n("8418"),u=n("1dde"),b=n("ae40"),f=u("splice"),d=b("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,k=Math.min,h=9007199254740991,_="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!f||!d},{splice:function(e,t){var n,r,u,b,f,d,m=s(this),v=a(m.length),w=o(e,v),g=arguments.length;if(0===g?n=r=0:1===g?(n=0,r=v-w):(n=g-2,r=k(p(i(t),0),v-w)),v+n-r>h)throw TypeError(_);for(u=l(m,r),b=0;b<r;b++)f=w+b,f in m&&c(u,b,m[f]);if(u.length=r,n<r){for(b=w;b<v-r;b++)f=b+r,d=b+n,f in m?m[d]=m[f]:delete m[d];for(b=v;b>v-r+n;b--)delete m[b-1]}else if(n>r)for(b=v-r;b>w;b--)f=b+r-1,d=b+n-1,f in m?m[d]=m[f]:delete m[d];for(b=0;b<n;b++)m[b+w]=arguments[b+2];return m.length=v-r+n,u}})},a640:function(e,t,n){"use strict";var r=n("d039");e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},ae40:function(e,t,n){var r=n("83ab"),o=n("d039"),i=n("5135"),a=Object.defineProperty,s={},l=function(e){throw e};e.exports=function(e,t){if(i(s,e))return s[e];t||(t={});var n=[][e],c=!!i(t,"ACCESSORS")&&t.ACCESSORS,u=i(t,0)?t[0]:l,b=i(t,1)?t[1]:void 0;return s[e]=!!n&&!o((function(){if(c&&!r)return!0;var e={length:-1};c?a(e,1,{enumerable:!0,get:l}):e[1]=1,n.call(e,u,b)}))}},af9e:function(e,t,n){"use strict";var r=n("019c"),o=n.n(r);o.a},b727:function(e,t,n){var r=n("0366"),o=n("44ad"),i=n("7b0b"),a=n("50c4"),s=n("65f0"),l=[].push,c=function(e){var t=1==e,n=2==e,c=3==e,u=4==e,b=6==e,f=5==e||b;return function(d,p,k,h){for(var _,m,v=i(d),w=o(v),g=r(p,k,3),S=a(w.length),x=0,L=h||s,y=t?L(d,S):n?L(d,0):void 0;S>x;x++)if((f||x in w)&&(_=w[x],m=g(_,x,v),e))if(t)y[x]=m;else if(m)switch(e){case 3:return!0;case 5:return _;case 6:return x;case 2:l.call(y,_)}else if(u)return!1;return b?-1:c||u?u:y}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},e8b5:function(e,t,n){var r=n("c6b6");e.exports=Array.isArray||function(e){return"Array"==r(e)}},fdbc:function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-2efe7390.2a70e0c9.js.map